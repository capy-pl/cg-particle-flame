{"version":3,"sources":["ParticleFire/Particle.js","ParticleFire/util.js","ParticleFire/shaders/particle.vert","ParticleFire/shaders/particle.frag","OrbitContorls.js","App.js","reportWebVitals.js","index.js"],"names":["MAXIMUM_PARTICLE_NUM","DEFAULT_FADING_SPEED","ParticleOptions","size","default","min","max","sizeVarience","speed","speedVarience","centrality","fadingSpeed","PARTICLE_STATE","ParticleFire","options","setAttr","key","val","hasOwnProperty","bulkSetAttrs","k","setParticleNum","num","particleNum","i","particleState","alpha","init","appendParticle","particleNumber","index","particle","createParticle","position","x","y","z","vel","vec","Three","ang","Math","PI","phi","random","randFloatSpread","theta","randFloat","sin","cos","randomStart","xrad","zrad","normalize","randomParticleVel","update","elapsed","pos","particleSystem","geometry","attributes","array","elapsedMs","prevElapsed","numShouldGen","fadeFactor","length","tanh","needsUpdate","this","Float32Array","Uint8Array","time","center","setAttribute","texture","loadTexture","wrapS","wrapT","minFilter","uniforms","tex","value","color","material","vertexShader","fragmentShader","blending","depthTest","transparent","blendSrc","blendDst","name","load","process","_changeEvent","type","_startEvent","_endEvent","OrbitControls","object","domElement","undefined","console","warn","document","error","style","touchAction","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","getAzimuthalAngle","getDistance","distanceTo","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","push","addPointer","pointerType","trackPointer","DOLLY_ROTATE","onTouchStart","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","preventDefault","handleMouseWheel","code","handleKeyDown","splice","pointer","passive","EventDispatcher","App","props","configGUI","gui","dat","show","scene","camera","window","innerWidth","innerHeight","renderer","antialias","clock","start","stats","Stat","showPanel","body","appendChild","dom","setSize","setClearColor","querySelector","orbitControl","particleFire","Particle","animate","begin","getElapsedTime","render","end","requestAnimationFrame","onresize","id","React","PureComponent","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.20321ed2.chunk.js","sourcesContent":["import * as Three from 'three';\n\nimport {\n  randomStart,\n  randomDest,\n  random2DVec,\n  randomParticleVel,\n  unitDirection\n} from './util';\n\nimport vertexShader from './shaders/particle.vert';\nimport fragmentShader from './shaders/particle.frag';\n\nconst MINIMUM_PARTICLE_NUM = 100;\nconst MAXIMUM_PARTICLE_NUM = 6000;\nconst DEFAULT_PARTICLE_NUM = 3000;\n\nconst MAXIMUM_LIFETIME = 1;\n\nconst DEFAULT_SIZE = 0.6;\nconst MINIMUM_SIZE = 0.01\nconst MAXIMUM_SIZE = 1;\n\nconst DEFAULT_SIZE_VARIANCE = 0.2;\nconst MAX_SIZE_VARIANCE = 0.5;\nconst MIN_SIZE_VARIANCE = 0.01;\n\nconst DEFUALT_ALPHA = 0.6;\n\nconst DEFAULT_SPEED = 120;\nconst MAX_SPEED = 200;\nconst MIN_SPEED = 50;\n\n\nconst DEFAULT_SPEED_VARIANCE = 100;\nconst MAX_SPEED_VARIANCE = 100;\nconst MIN_SPEED_VARIANCE = 0;\n\nconst DEFAULT_FADING_SPEED = 0.0085;\nconst MAXIMUM_FADING_SPEED = 0.03;\nconst MINIMUM_FADING_SPEED = 0.001;\n\nconst MIN_CENTRALITY = 1;\nconst DEFAULT_CENTRALITY = 5;\nconst MAX_CENTRALITY = 10;\n\nconst DEFAULT_FIRE_HEIGHT = 10;\n\n// per second\nconst DEFAULT_PARTICLE_SPAWN_SPEED = 1600;\n\nconst ParticleOptions = {\n  // particleNum: {\n  //   default: MAXIMUM_PARTICLE_NUM,\n  //   max: MAXIMUM_PARTICLE_NUM,\n  //   min: MINIMUM_PARTICLE_NUM,\n  // },\n  size: {\n    default: DEFAULT_SIZE,\n    min: MINIMUM_SIZE,\n    max: MAXIMUM_SIZE,\n  },\n  sizeVarience: {\n    default: DEFAULT_SIZE_VARIANCE,\n    min: MIN_SIZE_VARIANCE,\n    max: MAX_SIZE_VARIANCE,\n  },\n  speed: {\n    default: DEFAULT_SPEED,\n    min: MIN_SPEED,\n    max: MAX_SPEED,\n  },\n  speedVarience: {\n    default: DEFAULT_SPEED_VARIANCE,\n    min: MIN_SPEED_VARIANCE,\n    max: MAX_SPEED_VARIANCE,\n  },\n  centrality: {\n    default: DEFAULT_CENTRALITY,\n    min: MIN_CENTRALITY,\n    max: MAX_CENTRALITY,\n  },\n  fadingSpeed: {\n    default: DEFAULT_FADING_SPEED,\n    min: MINIMUM_FADING_SPEED,\n    max: MAXIMUM_FADING_SPEED,\n  }\n};\n\nconst PARTICLE_STATE = {\n  DEACTIVE: 0,\n  ACTIVE: 1,\n};\n\nconst defaultTexture = 'gradient.png';\n\nexport default class ParticleFire {\n  constructor(options) {\n    this.options = {\n      size: DEFAULT_SIZE,\n      sizeVarience: DEFAULT_SIZE_VARIANCE,\n      speed: DEFAULT_SPEED,\n      speedVarience: DEFAULT_SPEED_VARIANCE,\n      fadingSpeed: DEFAULT_FADING_SPEED,\n      particleNum: DEFAULT_PARTICLE_NUM,\n      centrality: DEFAULT_CENTRALITY,\n    };\n\n    this.bulkSetAttrs(options);\n\n    this.position = new Float32Array(MAXIMUM_PARTICLE_NUM * 3);\n    this.vel = new Float32Array(MAXIMUM_PARTICLE_NUM * 3);\n    this.size = new Float32Array(MAXIMUM_PARTICLE_NUM);\n    this.speed = new Float32Array(MAXIMUM_PARTICLE_NUM);\n    this.alpha = new Float32Array(MAXIMUM_PARTICLE_NUM);\n    this.particleState = new Uint8Array(MAXIMUM_PARTICLE_NUM);\n\n    this.prevElapsed = 0;\n    this.time = 0;\n    this.particleNumber = 0;\n    this.numShouldGen = 0.0;\n\n    this.init();\n\n    this.center = new Three.Vector3(0, 0, 0);\n    this.geometry = new Three.BufferGeometry();\n\n    this.geometry.setAttribute('position', new Three.BufferAttribute(this.position, 3));\n    this.geometry.setAttribute('size', new Three.BufferAttribute(this.size, 1));\n    this.geometry.setAttribute('alpha', new Three.BufferAttribute(this.alpha, 1));\n\n    const texture = this.loadTexture(defaultTexture);\n    texture.wrapS = Three.ClampToEdgeWrapping;\n    texture.wrapT = Three.ClampToEdgeWrapping;\n    texture.minFilter = Three.LinearFilter;\n    const uniforms = {\n      tex : {\n        value: texture,\n      },\n      color: {\n        value: new Three.Color(0.964, 0.4, 0.1),\n      }\n    };\n\n    this.material = new Three.ShaderMaterial({\n      vertexShader,\n      fragmentShader,\n      uniforms,\n      blending: Three.CustomBlending,\n\t\t\tdepthTest: false,\n\t\t\ttransparent: true\n    });\n\n    this.material.blending = Three.CustomBlending;\n    this.material.blendSrc = Three.SrcAlphaFactor;\n    this.material.blendDst = Three.OneFactor;\n    this.particleSystem = new Three.Points(this.geometry, this.material);\n  }\n\n  setAttr = (key, val) => {\n    if (this.options.hasOwnProperty(key) && val && this.options[key] !== val) {\n      this.options[key] = val;\n    }\n  }\n\n  bulkSetAttrs = (options) => {\n    for (let k in options) {\n      this.setAttr(k, options[k]);\n    }\n  }\n\n  setParticleNum = (num) => {\n    if (num !== this.options.particleNum) {\n      for (let i = 0; i < MAXIMUM_PARTICLE_NUM; i++) {\n        if (i < num && this.particleState[i] === PARTICLE_STATE.DEACTIVE) {\n          this.particleState[i] = PARTICLE_STATE.ACTIVE;\n          this.alpha[i] = 0;\n        }\n        if (i >= num && this.particleState[i] === PARTICLE_STATE.ACTIVE) {\n          this.particleState[i] = PARTICLE_STATE.DEACTIVE;\n          this.alpha[i] = 0;\n        }\n      }\n      this.options.particleNum = num;\n    }\n  }\n\n  loadTexture(name) {\n    const loader = new Three.TextureLoader();\n    return loader.load(`${process.env.PUBLIC_URL}/${name}`);\n  }\n\n  init = () => {\n    for (let i = 0;i < MAXIMUM_PARTICLE_NUM; i++) {\n      this.alpha[i] = 0;\n      this.particleState[i] = PARTICLE_STATE.DEACTIVE;\n    }\n  }\n\n  appendParticle = () => {\n    const i = this.particleNumber;\n    this.particleState[i] = PARTICLE_STATE.ACTIVE;\n\n    let index = i * 3;\n    const particle = this.createParticle();\n\n    this.position[index] = particle.position.x;\n    this.position[index + 1] = particle.position.y;\n    this.position[index + 2] = particle.position.z;\n\n    this.vel[index] = particle.vel.x;\n    this.vel[index + 1] = particle.vel.y;\n    this.vel[index + 2] = particle.vel.z;\n\n    this.size[i] = particle.size;\n    this.speed[i] = particle.speed;\n    this.alpha[i] = DEFUALT_ALPHA;\n    this.particleNumber += 1;\n}\n\n  createParticle = () => {\n    const start = randomStart();\n    const vel = randomParticleVel(this.options.centrality);\n    const speed = this.options.speed + Three.MathUtils.randFloatSpread(this.options.speedVarience);\n    const size = this.options.size + Three.MathUtils.randFloatSpread(this.options.sizeVarience);\n    return {\n      position: start,\n      vel, \n      speed,\n      size,\n    };\n  }\n\n  update = (elapsed) => {\n    const pos = this.particleSystem.geometry.attributes.position.array;\n    const alpha = this.particleSystem.geometry.attributes.alpha.array;\n    const elapsedMs = elapsed - this.prevElapsed;\n    this.prevElapsed = elapsed;\n\n    if (this.particleNumber < this.options.particleNum) {\n      this.numShouldGen += elapsedMs * DEFAULT_PARTICLE_SPAWN_SPEED;\n      while (this.numShouldGen > 0.0) {\n        this.appendParticle();\n        this.numShouldGen -= 1.0;\n      }\n    }\n\n    for(let i = 0;i < this.particleNumber; i++) {\n      let index = i * 3;\n\n      if (alpha[i] <= 0) {\n        const particle = this.createParticle();\n\n        pos[index] = particle.position.x;\n        pos[index + 1] = particle.position.y;\n        pos[index + 2] = particle.position.z;  \n\n        this.vel[index] = particle.vel.x;\n        this.vel[index + 1] = particle.vel.y;\n        this.vel[index + 2] = particle.vel.z;\n\n        this.speed[i] = particle.speed;\n        this.size[i] = particle.size;\n        alpha[i] = 0.6;\n      } else {\n        const speed = this.speed[i] / 1000;\n\n        pos[index] += this.vel[index] * speed;\n        pos[index + 1] += this.vel[index + 1] * speed;\n        pos[index + 2] += this.vel[index + 2] * speed;\n\n        const fadeFactor = new Three.Vector2(pos[index], pos[index + 2]).length();\n        alpha[i] -= this.options.fadingSpeed + Math.tanh(1.5 * fadeFactor) * 0.01;\n      }\n    }\n\n    this.particleSystem.geometry.attributes.size.needsUpdate = true;\n    this.particleSystem.geometry.attributes.position.needsUpdate = true;\n    this.particleSystem.geometry.attributes.alpha.needsUpdate = true;\n  }\n}\n\nexport {\n  ParticleOptions\n};\n","import * as Three from 'three';\n\nconst randomDest = () => {\n  const randomEnd = new Three.Vector3();\n  randomEnd.x = Three.MathUtils.randFloatSpread(2);\n  randomEnd.z = Three.MathUtils.randFloatSpread(2);\n  randomEnd.y = 10;\n  return randomEnd;\n}\n\n// start is a sphere\nconst randomStart = () => {\n  const vec = new Three.Vector3();\n  const radius = 3;\n  const ang =  2 * Math.PI ;\n  const phi = Math.random() * ang + Three.MathUtils.randFloatSpread(0.2 * Math.PI);\n  const theta = Math.random() * ang + Three.MathUtils.randFloatSpread(0.2 * Math.PI);\n\n  vec.x = Three.MathUtils.randFloat(0, radius * Math.sin(phi) * Math.cos(theta));\n  vec.y = 0.2 * Three.MathUtils.randFloat(0, radius * Math.cos(phi));\n  vec.z = Three.MathUtils.randFloat(0, radius * Math.sin(phi) * Math.sin(theta));\n  return vec;\n}\n\nconst randomParticleVel = (centrality) => {\n  const vec = new Three.Vector3();\n  const xrad = 2 * Math.PI * Math.random() + Three.MathUtils.randFloatSpread(0.4 * Math.PI);\n  const zrad = 2 * Math.PI * Math.random() + Three.MathUtils.randFloatSpread(0.4 * Math.PI);\n  vec.x = Math.cos(xrad);\n  vec.y = centrality;\n  vec.z = Math.sin(zrad);\n  vec.normalize();\n  return vec;\n}\n\nconst random2DVec = (start, end) => {\n  const pos = start.clone();\n  const vec = new Three.Vector3().subVectors(end, start);\n  vec.multiplyScalar(Math.random());\n  pos.add(vec);\n  return pos;\n};\n\nconst unitDirection = (start, end) => {\n  return new Three.Vector3().subVectors(end, start).normalize();\n};\n\nexport {\n  randomDest,\n  randomStart,\n  random2DVec,\n  randomParticleVel,\n  unitDirection\n};\n","export default \"attribute float size;\\nattribute float alpha;\\n\\nvarying float v_alpha;\\n\\nvoid main() {\\n    vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    gl_PointSize = 600.0 * size / length(mvPos.xyz);\\n    v_alpha = alpha;\\n}\";","export default \"uniform sampler2D tex;\\nuniform vec3 color;\\nvarying float v_alpha;\\n\\nvoid main() {\\n    gl_FragColor = vec4(color, v_alpha) * texture2D(tex, gl_PointCoord);\\n}\";","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t    removePointer( event );\n\n\t\t    if ( pointers.length === 0 ) {\n\n\t\t        scope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t        scope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t        scope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t    }\n\n\t\t    scope.dispatchEvent( _endEvent );\n\n\t\t    state = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\nexport default OrbitControls;","import React from 'react';\nimport * as Three from 'three';\nimport Stat from 'stats.js';\nimport * as dat from 'dat.gui';\n\nimport { Particle } from './ParticleFire';\nimport {\n  ParticleOptions\n} from './ParticleFire/Particle';\n\nimport OrbitControls from './OrbitContorls';\n\nclass App extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.options = {};\n    for (let key in ParticleOptions) {\n      this.options[key] = ParticleOptions[key].default;\n    }\n  }\n\n  componentDidMount() {\n\n    const gui = this.configGUI();\n\n    gui.show();\n\n    const scene = new Three.Scene();\n    const camera = new Three.PerspectiveCamera(60, window.innerWidth / window.innerHeight, .1, 1000);\n    const renderer = new Three.WebGLRenderer({\n      antialias: true,\n    });\n\n    const clock = new Three.Clock();\n    clock.start();\n    const stats = new Stat();\n    stats.showPanel(0);\n    document.body.appendChild(stats.dom);\n\n    camera.position.set(10, 2, 0);\n    \n    renderer.setSize(window.innerWidth, window.innerHeight);\n    // 0x0c0c0c\n    renderer.setClearColor(0x0c0c0c, 1);\n    document.querySelector(\"#main\").appendChild(renderer.domElement);\n\n    const orbitControl = new OrbitControls(camera, document.querySelector(\"#main\"));\n    const particleFire = new Particle();\n\n    scene.add(particleFire.particleSystem);\n    const axesHelper = new Three.AxesHelper(5);\n\n    // scene.add(axesHelper);\n\n    const animate = () => {\n      stats.begin();\n      const elapsed = clock.getElapsedTime();\n\n      orbitControl.update();\n\n      particleFire.bulkSetAttrs(this.options);\n      particleFire.update(elapsed);\n      camera.lookAt( particleFire.particleSystem.position );\n  \n      renderer.render( scene, camera );\n      stats.end();\n      requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    window.onresize = () => {\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n  }\n\n  configGUI = () => {\n    const gui = new dat.GUI();\n    for (let key in ParticleOptions) {\n      gui.add(this.options, key, ParticleOptions[key].min, ParticleOptions[key].max)\n    }\n    return gui; \n  }\n\n  render() {\n    return <div id=\"main\">\n    </div>\n  }\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}